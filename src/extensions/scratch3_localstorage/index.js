const ArgumentType = require('../../extension-support/argument-type');
const BlockType = require('../../extension-support/block-type');


/**
 * Icon png to be displayed at the left edge of each extension block, encoded as a data URI.
 * @type {string}
 */
// eslint-disable-next-line max-len
const blockIconURL = 'data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2aWV3Qm94PScwIDAgMTAyNCAxMDI0JyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzIwMCcgaGVpZ2h0PScyMDAnPjxwYXRoIGQ9J001MTIgMEMzMjEuMTg0IDAgMTI4IDU0Ljk2IDEyOCAxNjB2NzA0YzAgMTA1LjA0IDE5My4xODQgMTYwIDM4NCAxNjBzMzg0LTU0Ljk2IDM4NC0xNjBWMTYwQzg5NiA1NC45NiA3MDIuODE2IDAgNTEyIDB6IG0zMjAgNDc2LjU0NFY2NDBjMCAzOC4yMjQtMTI3LjYzMiA5Ni0zMjAgOTZzLTMyMC01Ny43NzYtMzIwLTk2VjQ3Ni41NDRjMC44MzIgMC40OTYgMS43NiAwLjk3NiAyLjYwOCAxLjQ4OCAyLjk0NCAxLjc2IDUuOTg0IDMuNDg4IDkuMDg4IDUuMTg0bDQuMzUyIDIuMzUyYzMuNjggMS45MiA3LjQ3MiAzLjc3NiAxMS4zNiA1LjYxNiAwLjg4IDAuNDE2IDEuNzEyIDAuODQ4IDIuNjA4IDEuMjQ4IDQuOCAyLjIwOCA5LjY5NiA0LjMyIDE0LjczNiA2LjQgMS40NTYgMC41OTIgMi45NiAxLjE1MiA0LjQ0OCAxLjcyOHE1LjYgMi4yMDggMTEuMzkyIDQuMzA0YTQ1MS4yIDQ1MS4yIDAgMCAwIDE3LjQ0IDUuOTA0YzEuNiAwLjUyOCAzLjIgMS4wNzIgNC45MTIgMS42cTguMzg0IDIuNTkyIDE3LjA4OCA0Ljk2bDMuNTUyIDAuOTI4cTcuMTIgMS45MDQgMTQuNCAzLjY0OGw2LjIyNCAxLjQ1NmM0LjI0IDAuOTc2IDguNTI4IDEuOTA0IDEyLjggMi44MTYgMi4wOCAwLjQzMiA0LjE2IDAuODggNi4yNTYgMS4yOTZxOC4xNzYgMS42IDE2LjU0NCAzLjEwNGMwLjg0OCAwLjE2IDEuNjk2IDAuMzM2IDIuNTYgMC40OHE5LjYgMS42IDE5LjQ0IDMuMTA0bDYuMDE2IDAuODQ4YzQuOCAwLjY3MiA5LjQ3MiAxLjI5NiAxNC4yNTYgMS44ODhsNi44NDggMC44MzJjNS4wMjQgMC41NzYgMTAuMDggMS4xMDQgMTUuMTY4IDEuNiAxLjc3NiAwLjE3NiAzLjUzNiAwLjM2OCA1LjMxMiAwLjUyOHExMC4xOTIgMC45NiAyMC40NjQgMS42OTZjMS41MiAwLjExMiAzLjAyNCAwLjE3NiA0LjU0NCAwLjI3MnE4LjE2IDAuNTQ0IDE2LjM2OCAwLjk2bDYuOCAwLjMwNGM0Ljk5MiAwLjIyNCAxMCAwLjM4NCAxNS4wMjQgMC41MjhsNi40IDAuMTc2YzYuOTc2IDAuMTQ0IDEzLjk2OCAwLjI0IDIwLjk0NCAwLjI0czEzLjk2OC0wLjA5NiAyMC45NDQtMC4yNGw2LjQtMC4xNzZjNS4wMjQtMC4xNDQgMTAuMDMyLTAuMzA0IDE1LjAyNC0wLjUyOGw2LjgtMC4zMDRxOC4yMDgtMC40IDE2LjM2OC0wLjk2YzEuNTItMC4wOTYgMy4wMjQtMC4xNiA0LjU0NC0wLjI3MnExMC4yNzItMC43MzYgMjAuNDQ4LTEuNjk2YzEuODA4LTAuMTYgMy41NjgtMC4zNTIgNS4zNDQtMC41MjggNS4wODgtMC41MTIgMTAuMTQ0LTEuMDQgMTUuMTUyLTEuNmw2Ljg0OC0wLjgzMmM0LjgtMC41OTIgOS42LTEuMjE2IDE0LjI1Ni0xLjg4OGw2LjAxNi0wLjg0OHE5LjgyNC0xLjQ3MiAxOS40NC0zLjEwNGMwLjg2NC0wLjE0NCAxLjcxMi0wLjMyIDIuNTYtMC40OHE4LjM2OC0xLjQ1NiAxNi41NDQtMy4xMDRjMi4wOTYtMC40MTYgNC4xNzYtMC44NjQgNi4yNTYtMS4yOTYgNC4zMi0wLjkxMiA4LjYwOC0xLjg0IDEyLjgtMi44MTZsNi4yMjQtMS40NTZxNy4zMjgtMS43NDQgMTQuNC0zLjY0OGwzLjU1Mi0wLjkyOHE4LjcwNC0yLjM2OCAxNy4wODgtNC45NmMxLjYtMC40OTYgMy4yLTEuMDQgNC45MTItMS42YTQzMC4yMDggNDMwLjIwOCAwIDAgMCAyOC44MzItMTAuMTkybDQuNDQ4LTEuNzQ0YzUuMDQtMi4wNjQgOS45NjgtNC4xNzYgMTQuNzM2LTYuNCAwLjg5Ni0wLjQgMS43MjgtMC44MzIgMi42MDgtMS4yNDggMy44ODgtMS44NCA3LjY4LTMuNjk2IDExLjM2LTUuNjE2bDQuMzUyLTIuMzUyYzMuMTA0LTEuNjk2IDYuMTQ0LTMuNDI0IDkuMDg4LTUuMTg0IDAuOTQ0LTAuNTEyIDEuODcyLTAuOTkyIDIuNzA0LTEuNDg4eiBtMC0yMjRWMzg0YzAgMzguMjI0LTEyNy42MzIgOTYtMzIwIDk2cy0zMjAtNTcuNzc2LTMyMC05NnYtMTMxLjQ1NmMwLjgzMiAwLjQ5NiAxLjc2IDAuOTc2IDIuNjA4IDEuNDg4IDIuOTQ0IDEuNzYgNS45ODQgMy40ODggOS4wODggNS4xODRsNC4zNTIgMi4zNTJjMy42OCAxLjkyIDcuNDcyIDMuNzc2IDExLjM2IDUuNjE2IDAuODggMC40MTYgMS43MTIgMC44NDggMi42MDggMS4yNDggNC44IDIuMjA4IDkuNjk2IDQuMzIgMTQuNzM2IDYuNCAxLjQ1NiAwLjU5MiAyLjk2IDEuMTUyIDQuNDQ4IDEuNzI4cTUuNiAyLjIwOCAxMS4zOTIgNC4zMDRhNDUxLjIgNDUxLjIgMCAwIDAgMTcuNDQgNS45MDRjMS42IDAuNTI4IDMuMiAxLjA3MiA0LjkxMiAxLjZxOC4zODQgMi41OTIgMTcuMDg4IDQuOTZsMy41NTIgMC45MjhxNy4xMiAxLjg4OCAxNC40IDMuNjQ4bDYuMjI0IDEuNDU2YzQuMjQgMC45NzYgOC41MjggMS45MDQgMTIuOCAyLjgxNiAyLjA4IDAuNDMyIDQuMTYgMC44OCA2LjI1NiAxLjI5NnE4LjE3NiAxLjYgMTYuNTQ0IDMuMTA0YzAuODQ4IDAuMTYgMS42OTYgMC4zMzYgMi41NiAwLjQ4cTkuNiAxLjYgMTkuNDQgMy4xMDRsNi4wMTYgMC44NDhjNC44IDAuNjcyIDkuNDcyIDEuMjk2IDE0LjI1NiAxLjg4OGw2Ljg0OCAwLjgzMmM1LjAyNCAwLjU3NiAxMC4wOCAxLjEwNCAxNS4xNjggMS42IDEuNzc2IDAuMTc2IDMuNTM2IDAuMzY4IDUuMzEyIDAuNTI4cTEwLjE5MiAwLjk2IDIwLjQ2NCAxLjY5NmMxLjUyIDAuMTEyIDMuMDI0IDAuMTc2IDQuNTQ0IDAuMjcycTguMTYgMC41NiAxNi4zNjggMC45Nmw2LjggMC4zMDRjNC45OTIgMC4yMjQgMTAgMC4zODQgMTUuMDI0IDAuNTI4bDYuNCAwLjE3NmM2Ljk3NiAwLjE0NCAxMy45NjggMC4yNCAyMC45NDQgMC4yNHMxMy45NjgtMC4wOTYgMjAuOTQ0LTAuMjRsNi40LTAuMTc2YzUuMDI0LTAuMTQ0IDEwLjAzMi0wLjMwNCAxNS4wMjQtMC41MjhsNi44LTAuMzA0cTguMjA4LTAuNCAxNi4zNjgtMC45NmMxLjUyLTAuMDk2IDMuMDI0LTAuMTYgNC41NDQtMC4yNzJxMTAuMjcyLTAuNzM2IDIwLjQ0OC0xLjY5NmMxLjgwOC0wLjE2IDMuNTY4LTAuMzUyIDUuMzQ0LTAuNTI4IDUuMDg4LTAuNTEyIDEwLjE0NC0xLjA0IDE1LjE1Mi0xLjZsNi44NDgtMC44MzJjNC44LTAuNTkyIDkuNi0xLjIxNiAxNC4yNTYtMS44ODhsNi4wMTYtMC44NDhxOS44MjQtMS40NTYgMTkuNDQtMy4xMDRjMC44NjQtMC4xNDQgMS43MTItMC4zMiAyLjU2LTAuNDhxOC4zNjgtMS40NTYgMTYuNTQ0LTMuMTA0YzIuMDk2LTAuNDE2IDQuMTc2LTAuODY0IDYuMjU2LTEuMjk2IDQuMzItMC45MTIgOC42MDgtMS44NCAxMi44LTIuODE2bDYuMjI0LTEuNDU2cTcuMzI4LTEuNzYgMTQuNC0zLjY0OGwzLjU1Mi0wLjkyOHE4LjcwNC0yLjM2OCAxNy4wODgtNC45NmMxLjYtMC40OTYgMy4yLTEuMDQgNC45MTItMS42YTQzMC4yMDggNDMwLjIwOCAwIDAgMCAyOC44MzItMTAuMTkybDQuNDQ4LTEuNzQ0YzUuMDQtMi4wNjQgOS45NjgtNC4xNzYgMTQuNzM2LTYuNCAwLjg5Ni0wLjQgMS43MjgtMC44MzIgMi42MDgtMS4yNDggMy44ODgtMS44NCA3LjY4LTMuNjk2IDExLjM2LTUuNjE2bDQuMzUyLTIuMzUyYzMuMTA0LTEuNjk2IDYuMTQ0LTMuNDI0IDkuMDg4LTUuMTg0IDAuOTQ0LTAuNTEyIDEuODcyLTAuOTkyIDIuNzA0LTEuNDg4ek01MTIgNjRjMTkyLjM2OCAwIDMyMCA1Ny43NzYgMzIwIDk2cy0xMjcuNjMyIDk2LTMyMCA5Ni0zMjAtNTcuNzc2LTMyMC05NiAxMjcuNjMyLTk2IDMyMC05NnogbTMyMCA4MDBjMCAzOC4yMjQtMTI3LjYzMiA5Ni0zMjAgOTZzLTMyMC01Ny43NzYtMzIwLTk2di0xMzEuNDU2YzAuODMyIDAuNDk2IDEuNzYgMC45NzYgMi42MDggMS40ODggMi45NDQgMS43NiA1Ljk4NCAzLjQ4OCA5LjA4OCA1LjE4NGw0LjM1MiAyLjM1MmMzLjY4IDEuOTIgNy40NzIgMy43NzYgMTEuMzYgNS42MTYgMC44OCAwLjQxNiAxLjcxMiAwLjg0OCAyLjYwOCAxLjI0OCA0LjggMi4yMDggOS42OTYgNC4zMiAxNC43MzYgNi40IDEuNDU2IDAuNTkyIDIuOTYgMS4xNTIgNC40NDggMS43MjhxNS42IDIuMjA4IDExLjM5MiA0LjMwNGE0NTEuMiA0NTEuMiAwIDAgMCAxNy40NCA1LjkwNGMxLjYgMC41MjggMy4yIDEuMDcyIDQuOTEyIDEuNnE4LjM4NCAyLjU5MiAxNy4wODggNC45NmwzLjU1MiAwLjkyOHE3LjEyIDEuOTA0IDE0LjQgMy42NDhsNi4yMjQgMS40NTZjNC4yNCAwLjk3NiA4LjUyOCAxLjkwNCAxMi44IDIuODE2IDIuMDggMC40MzIgNC4xNiAwLjg4IDYuMjU2IDEuMjk2cTguMTc2IDEuNiAxNi41NDQgMy4xMDRjMC44NDggMC4xNiAxLjY5NiAwLjMzNiAyLjU2IDAuNDhxOS42IDEuNiAxOS40NCAzLjEwNGw2LjAxNiAwLjg0OGM0LjggMC42NzIgOS40NzIgMS4yOTYgMTQuMjU2IDEuODg4bDYuODQ4IDAuODMyYzUuMDI0IDAuNTc2IDEwLjA4IDEuMTA0IDE1LjE2OCAxLjYgMS43NzYgMC4xNzYgMy41MzYgMC4zNjggNS4zMTIgMC41MjhxMTAuMTkyIDAuOTYgMjAuNDY0IDEuNjk2YzEuNTIgMC4xMTIgMy4wMjQgMC4xNzYgNC41NDQgMC4yNzJxOC4xNiAwLjU0NCAxNi4zNjggMC45Nmw2LjggMC4zMDRjNC45OTIgMC4yMjQgMTAgMC4zODQgMTUuMDI0IDAuNTI4bDYuNCAwLjE3NmM2Ljk3NiAwLjE0NCAxMy45NjggMC4yNCAyMC45NDQgMC4yNHMxMy45NjgtMC4wOTYgMjAuOTQ0LTAuMjRsNi40LTAuMTc2YzUuMDI0LTAuMTQ0IDEwLjAzMi0wLjMwNCAxNS4wMjQtMC41MjhsNi44LTAuMzA0cTguMjA4LTAuNCAxNi4zNjgtMC45NmMxLjUyLTAuMDk2IDMuMDI0LTAuMTYgNC41NDQtMC4yNzJxMTAuMjcyLTAuNzM2IDIwLjQ0OC0xLjY5NmMxLjgwOC0wLjE2IDMuNTY4LTAuMzUyIDUuMzQ0LTAuNTI4IDUuMDg4LTAuNTEyIDEwLjE0NC0xLjA0IDE1LjE1Mi0xLjZsNi44NDgtMC44MzJjNC44LTAuNTkyIDkuNi0xLjIxNiAxNC4yNTYtMS44ODhsNi4wMTYtMC44NDhxOS44MjQtMS40NzIgMTkuNDQtMy4xMDRjMC44NjQtMC4xNDQgMS43MTItMC4zMiAyLjU2LTAuNDhxOC4zNjgtMS40NTYgMTYuNTQ0LTMuMTA0YzIuMDk2LTAuNDE2IDQuMTc2LTAuODY0IDYuMjU2LTEuMjk2IDQuMzItMC45MTIgOC42MDgtMS44NCAxMi44LTIuODE2bDYuMjI0LTEuNDU2cTcuMzI4LTEuNzQ0IDE0LjQtMy42NDhsMy41NTItMC45MjhxOC43MDQtMi4zNjggMTcuMDg4LTQuOTZjMS42LTAuNDk2IDMuMi0xLjA0IDQuOTEyLTEuNmE0MzAuMjA4IDQzMC4yMDggMCAwIDAgMjguODMyLTEwLjE5Mmw0LjQ0OC0xLjc0NGM1LjA0LTIuMDY0IDkuOTY4LTQuMTc2IDE0LjczNi02LjQgMC44OTYtMC40IDEuNzI4LTAuODMyIDIuNjA4LTEuMjQ4IDMuODg4LTEuODQgNy42OC0zLjY5NiAxMS4zNi01LjYxNmw0LjM1Mi0yLjM1MmMzLjEwNC0xLjY5NiA2LjE0NC0zLjQyNCA5LjA4OC01LjE4NCAwLjg0OC0wLjUxMiAxLjc3Ni0wLjk5MiAyLjYwOC0xLjQ4OHonIGZpbGw9JyMyMzFGMjAnPjwvcGF0aD48L3N2Zz4=';
/**
 * Class for the localStorage blocks.
 * @constructor
 */

class Scratch3localStorageBlocks {
    constructor (runtime) {
        this.runtime = runtime;
    }
    getInfo () {
        return {
            id: 'localstorage',
            name: 'localStorage',
            blockIconURI: blockIconURL,
            blocks: [
                {
                    opcode: 'setItem',
                    blockType: BlockType.COMMAND,
                    text: 'setItem([KEY],[VALUE])',
                    arguments: {
                        KEY: {
                            type: ArgumentType.STRING,
                            defaultValue: ' '
                        },
                        VALUE: {
                            type: ArgumentType.STRING,
                            defaultValue: ' '
                        }
                    }
                },
                {
                    opcode: 'removeItem',
                    blockType: BlockType.COMMAND,
                    text: 'removeItem([KEY])',
                    arguments: {
                        KEY: {
                            type: ArgumentType.STRING,
                            defaultValue: ' '
                        }
                    }
                },
                {
                    opcode: 'find',
                    blockType: BlockType.BOOLEAN,
                    text: '[KEY]是否存在',
                    arguments: {
                        KEY: {
                            type: ArgumentType.STRING,
                            defaultValue: ' '
                        }
                    }
                },
                {
                    opcode: 'getItem',
                    blockType: BlockType.REPORTER,
                    text: 'getItem([KEY])',
                    arguments: {
                        KEY: {
                            type: ArgumentType.STRING,
                            defaultValue: ' '
                        }
                    }
                }
            ]
        };
    }

    setItem (args) {
        localStorage.setItem(args.KEY, args.VALUE);
    }
    removeItem (args) {
        localStorage.removeItem(args.KEY);
    }
    find (args) {
        return Boolean(localStorage[args.KEY]);
    }
    getItem (args) {
        return localStorage.getItem(args.KEY);
    }

}


module.exports = Scratch3localStorageBlocks;
